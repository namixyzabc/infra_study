## **WEBサーバーとWEBアプリケーションの違い**

### **WEBサーバー**

* 役割: HTTPリクエストを受け取り、レスポンスを返すソフトウェア  
* 機能: 静的ファイルの配信、リクエストの処理・転送  
* 例: Apache、Nginx、IIS  
* 位置: インフラ層（サーバー側の基盤）

### **WEBアプリケーション**

* 役割: ユーザーの操作に応じて動的なコンテンツを生成するプログラム  
* 機能: ビジネスロジック処理、データベース連携、画面表示  
* 例: ECサイト、SNS、業務システム  
* 位置: アプリケーション層（ユーザー向け機能）

### **関係性**

WEBサーバーは土台、WEBアプリケーションはその上で動くサービスという関係です。WEBサーバーがリクエストを受けて、WEBアプリケーションが処理を行い、結果をWEBサーバー経由でユーザーに返します。

## **ビジネスロジックとは**

ビジネスロジックとは、システムが実際の業務や事業の規則・要求を処理するための仕組みのことです。

## **具体例で理解しよう**

### **ECサイトの注文処理の場合**

**`1. 商品をカートに追加`**  
**`2. 在庫チェック ← ビジネスロジック`**  
**`3. 割引計算 ← ビジネスロジック`**  
**`4. 配送料計算 ← ビジネスロジック`**  
**`5. 合計金額計算 ← ビジネスロジック`**  
**`6. 決済処理`**

## **ビジネスロジックの特徴**

### **✅ ビジネスロジックの例**

* 在庫管理：「在庫が0の商品は注文できない」  
* 価格計算：「VIP会員は10%割引」  
* 承認フロー：「10万円以上の決裁は部長承認が必要」  
* ポイント計算：「購入金額100円につき1ポイント付与」

### **❌ ビジネスロジックではない例**

* データベースへの保存処理  
* 画面表示の処理  
* ファイルの読み込み処理

## **WEBサーバーとWEBアプリケーションの違い（nginx例）**

### **WEBサーバー（nginx）**

役割: HTTPリクエストを受け取り、レスポンスを返すソフトウェア 機能:

* 静的ファイル（HTML、CSS、画像）の配信  
* リクエストの処理・転送（プロキシ）  
* ロードバランシング

nginx設定例:  
`nginx`  
`server {`  
    `listen 80;`  
    `server_name example.com;`  
      
    `# 静的ファイルの配信`  
    `location /static/ {`  
        `root /var/www/html;`  
    `}`  
      
    `# アプリケーションへの転送`  
    `location / {`  
        `proxy_pass http://localhost:3000;`  
    `}`  
`}`

### **WEBアプリケーション**

役割: ユーザーの操作に応じて動的なコンテンツを生成 機能:

* ビジネスロジック処理  
* データベース連携  
* 動的な画面生成

例: [Node.js](http://Node.js)、PHP、Pythonで作られたECサイトやSNS

| 実際の動作例 `1. ユーザーがブラウザで「example.com/static/logo.png」にアクセス    ↓ 2. nginx が /static/ にマッチ    ↓ 3. /var/www/html/static/logo.png を直接配信 --- 1. ユーザーがブラウザで「example.com/user/profile」にアクセス    ↓ 2. nginx が / にマッチ    ↓ 3. localhost:3000/user/profile にリクエストを転送    ↓ 4. アプリケーション（Node.js等）が動的にHTMLを生成して返答    ↓ 5. nginx がレスポンスをユーザーに送信` なぜこの構成にするのか パフォーマンス: 静的ファイルはnginxが高速配信 役割分担: 動的処理はアプリケーションが担当 セキュリティ: nginxがフロントエンドとして保護層の役割  |
| :---- |

| server\_name example.com; の解説 基本的な役割 \*\*「このドメイン名でアクセスされた時だけ、この設定を使ってください」\*\*という指示 具体的な動作 1\. リクエストの振り分け `nginx # 設定例 server {     listen 80;     server_name example.com;     # この設定はexample.comへのアクセス時のみ適用 } server {     listen 80;     server_name blog.example.com;     # この設定はblog.example.comへのアクセス時のみ適用 }` 2\. 実際のアクセス例 `✅ example.com → この設定が適用される ❌ blog.example.com → 別の設定が適用される ❌ other-site.com → この設定は適用されない` どこから来る情報か HTTPリクエストのHostヘッダー ブラウザがサーバーに送信するHTTPリクエストに含まれる情報： `GET / HTTP/1.1 Host: example.com  ← これとserver_nameがマッチするかチェック User-Agent: Mozilla/5.0...` 実際の流れ `1. ユーザーがブラウザで「http://example.com」と入力    ↓ 2. DNS解決でサーバーのIPアドレスを取得    ↓ 3. サーバーにHTTPリクエストを送信（Hostヘッダー: example.com）    ↓ 4. nginxが受信し、server_nameと照合    ↓ 5. マッチした設定ブロックを使用してレスポンス` 複数ドメインの指定も可能 `nginx server {     listen 80;     server_name example.com www.example.com;  # 複数指定     # example.com と www.example.com の両方で同じ設定を適用 }` ワイルドカードも使用可能 `nginx server {     listen 80;     server_name *.example.com;  # サブドメイン全て     # blog.example.com, shop.example.com など全てに適用 }` マッチしない場合 `nginx server {     listen 80;     server_name _;  # デフォルトサーバー（どのドメインにもマッチしない時）     return 444;     # 接続を切断 }` 要点まとめ 目的: 1つのサーバーで複数のサイトを運営する際の振り分け 判定基準: HTTPリクエストのHostヘッダー 効果: ドメインごとに異なる設定・コンテンツを提供可能 |
| :---- |
