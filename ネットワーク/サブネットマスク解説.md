# IPアドレスのサブネットマスク解説

## IPアドレスとは

IPアドレスは、ネットワーク上の機器を識別する32ビット（IPv4の場合）の数値です。通常は「192.168.1.1」のように4つの数値をドット（.）で区切って表記します。

## サブネットマスクの基本概念

**サブネットマスク**は、IPアドレスの「ネットワーク部」と「ホスト部」を区別するための仕組みです。

- **ネットワーク部**：どのネットワークに属するかを示す
- **ホスト部**：そのネットワーク内での個別の機器を識別する

### 表記方法

**CIDR記法**：`192.168.1.1/24`
**サブネットマスク記法**：`255.255.255.0`

## グローバルIPアドレスでのサブネット

### 特徴
- インターネット上で一意に識別される
- ISP（インターネットサービスプロバイダー）から割り当てられる
- 直接インターネットからアクセス可能

### 例：企業ネットワーク
```
IPアドレス：203.0.113.0/24
サブネットマスク：255.255.255.0
ネットワーク部：203.0.113（24ビット）
ホスト部：0（8ビット）
利用可能ホスト数：254台（203.0.113.1〜203.0.113.254）
```

### サブネット分割例
大きなグローバルIPブロックを分割する場合：
```
元のネットワーク：203.0.113.0/24

分割後：
- 203.0.113.0/26   →  203.0.113.1〜203.0.113.62（62台）
- 203.0.113.64/26  →  203.0.113.65〜203.0.113.126（62台）
- 203.0.113.128/26 →  203.0.113.129〜203.0.113.190（62台）
- 203.0.113.192/26 →  203.0.113.193〜203.0.113.254（62台）
```

## ローカルIPアドレス（プライベートIP）でのサブネット

### 特徴
- 組織内でのみ使用される
- インターネットでは直接ルーティングされない
- **RFC1918**で定義された範囲内で使用

### プライベートIP範囲
```
クラスA：10.0.0.0/8        （10.0.0.0〜10.255.255.255）
クラスB：172.16.0.0/12     （172.16.0.0〜172.31.255.255）
クラスC：192.168.0.0/16    （192.168.0.0〜192.168.255.255）
```

### 実践例：オフィスネットワーク設計

#### 部署別サブネット分割
```
基本ネットワーク：192.168.0.0/16

部署別分割：
- 営業部：192.168.1.0/24   → 254台
- 開発部：192.168.2.0/24   → 254台
- 総務部：192.168.3.0/24   → 254台
- サーバー：192.168.10.0/24 → 254台
```

#### さらに細かい分割例
```
開発部内でのチーム分割：192.168.2.0/24

チーム別：
- フロントエンド：192.168.2.0/26   → 62台
- バックエンド：192.168.2.64/26    → 62台
- インフラ：192.168.2.128/26       → 62台
- 予備：192.168.2.192/26           → 62台
```

## サブネットマスクの計算方法

### ビット計算
```
/24の場合：
11111111.11111111.11111111.00000000
= 255.255.255.0

/26の場合：
11111111.11111111.11111111.11000000
= 255.255.255.192
```

### ホスト数の計算
**ホスト数 = 2^（32 - サブネット長）- 2**

例：
- /24：2^8 - 2 = 254台
- /26：2^6 - 2 = 62台
- /28：2^4 - 2 = 14台

## 設定例

### Windows設定
```
IPアドレス：192.168.1.100
サブネットマスク：255.255.255.0
デフォルトゲートウェイ：192.168.1.1
```

### Linux設定（ip コマンド）
```bash
# IPアドレス設定
ip addr add 192.168.1.100/24 dev eth0

# ルート設定
ip route add default via 192.168.1.1
```

## 重要なポイント

- **ネットワークアドレス**と**ブロードキャストアドレス**は機器に割り当てできない
- **サブネット分割**により、ネットワークの管理とセキュリティが向上する
- **VLSM（可変長サブネットマスク）**により、必要に応じて柔軟なサイズのサブネットを作成可能
- **グローバルIP**は有限な資源のため、効率的な使用が重要
- **ローカルIP**は組織内で自由に設計可能だが、適切な設計が運用の鍵となる
