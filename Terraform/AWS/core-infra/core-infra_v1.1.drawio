<?xml version="1.0" encoding="UTF-8"?> <mxfile host="app.diagrams.net" modified="2025-12-03T00:00:00.000Z" agent="5.0 (compatible)" etag="1" version="20.7.3" type="device"> <diagram id="diagram0" name="Page-1"> <mxGraphModel dx="995" dy="651" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0"> <root> <mxCell id="0"/> <mxCell id="1" parent="0"/>
    <!-- VPC Group -->
    <mxCell id="vpc_group" value="VPC: ${local.name} (10.0.0.0/16)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F5F7FA;strokeColor=#2B4A76;fontSize=12;fontColor=#06203A" vertex="1" parent="1">
      <mxGeometry x="40" y="40" width="1160" height="760" as="geometry"/>
    </mxCell>

    <!-- Internet Gateway -->
    <mxCell id="igw" value="Internet Gateway (igw)" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#0B5394;fontSize=11" vertex="1" parent="vpc_group">
      <mxGeometry x="540" y="60" width="200" height="40" as="geometry"/>
    </mxCell>

    <!-- Public Route Table -->
    <mxCell id="rt_public" value="Public Route Table" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#6AA84F;fontSize=11" vertex="1" parent="vpc_group">
      <mxGeometry x="820" y="60" width="200" height="40" as="geometry"/>
    </mxCell>

    <!-- AZ 1 group -->
    <mxCell id="az1_group" value="AZ: ${azs[0]}" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=#999999;fontSize=11" vertex="1" parent="vpc_group">
      <mxGeometry x="60" y="130" width="360" height="620" as="geometry"/>
    </mxCell>

    <!-- AZ2 group -->
    <mxCell id="az2_group" value="AZ: ${azs[1]}" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=#999999;fontSize=11" vertex="1" parent="vpc_group">
      <mxGeometry x="420" y="130" width="360" height="620" as="geometry"/>
    </mxCell>

    <!-- AZ3 group -->
    <mxCell id="az3_group" value="AZ: ${azs[2]}" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=#999999;fontSize=11" vertex="1" parent="vpc_group">
      <mxGeometry x="780" y="130" width="360" height="620" as="geometry"/>
    </mxCell>

    <!-- Public subnet AZ1 -->
    <mxCell id="pub_subnet_1" value="Public Subnet A (cidr)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#EEF7FF;strokeColor=#2B8CFF;fontSize=11" vertex="1" parent="az1_group">
      <mxGeometry x="20" y="20" width="320" height="120" as="geometry"/>
    </mxCell>

    <!-- Private subnet AZ1 -->
    <mxCell id="priv_subnet_1" value="Private Subnet A (cidr)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF7E6;strokeColor=#E69138;fontSize=11" vertex="1" parent="az1_group">
      <mxGeometry x="20" y="160" width="320" height="400" as="geometry"/>
    </mxCell>

    <!-- Public subnet AZ2 -->
    <mxCell id="pub_subnet_2" value="Public Subnet B (cidr)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#EEF7FF;strokeColor=#2B8CFF;fontSize=11" vertex="1" parent="az2_group">
      <mxGeometry x="20" y="20" width="320" height="120" as="geometry"/>
    </mxCell>

    <!-- Private subnet AZ2 -->
    <mxCell id="priv_subnet_2" value="Private Subnet B (cidr)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF7E6;strokeColor=#E69138;fontSize=11" vertex="1" parent="az2_group">
      <mxGeometry x="20" y="160" width="320" height="400" as="geometry"/>
    </mxCell>

    <!-- Public subnet AZ3 -->
    <mxCell id="pub_subnet_3" value="Public Subnet C (cidr)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#EEF7FF;strokeColor=#2B8CFF;fontSize=11" vertex="1" parent="az3_group">
      <mxGeometry x="20" y="20" width="320" height="120" as="geometry"/>
    </mxCell>

    <!-- Private subnet AZ3 -->
    <mxCell id="priv_subnet_3" value="Private Subnet C (cidr)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF7E6;strokeColor=#E69138;fontSize=11" vertex="1" parent="az3_group">
      <mxGeometry x="20" y="160" width="320" height="400" as="geometry"/>
    </mxCell>

    <!-- NAT Gateway in Public Subnet A (single NAT Gateway) -->
    <mxCell id="nat_gw" value="NAT Gateway" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#BF9000;fontSize=11" vertex="1" parent="pub_subnet_1">
      <mxGeometry x="40" y="20" width="120" height="60" as="geometry"/>
    </mxCell>

    <!-- Elastic IP (associated with NAT) -->
    <mxCell id="eip" value="Elastic IP (EIP) - NAT" style="shape=ellipse;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#666666;fontSize=10" vertex="1" parent="pub_subnet_1">
      <mxGeometry x="180" y="20" width="120" height="60" as="geometry"/>
    </mxCell>

    <!-- Internet Gateway edge to Public RT -->
    <mxCell id="edge_igw_rt" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#999999" edge="1" parent="vpc_group" source="igw" target="rt_public">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>

    <!-- Route: Public RT -> Internet Gateway -->
    <mxCell id="edge_rt_igw" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#999999;endArrow=block;endSize=8" edge="1" parent="vpc_group" source="rt_public" target="igw">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>

    <!-- ECS Cluster (Fargate) group - spans private subnets -->
    <mxCell id="ecs_group" value="ECS Cluster (Fargate)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#7F3F98;fontSize=12;fontColor=#3E1F4A" vertex="1" parent="vpc_group">
      <mxGeometry x="260" y="240" width="640" height="320" as="geometry"/>
    </mxCell>

    <!-- Fargate tasks placeholder in private subnets -->
    <mxCell id="fargate_task_1" value="Fargate Task\n(Private Subnet A)" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fillColor=#F2F9F3;strokeColor=#6AA84F;fontSize=11" vertex="1" parent="ecs_group">
      <mxGeometry x="40" y="40" width="180" height="80" as="geometry"/>
    </mxCell>

    <mxCell id="fargate_task_2" value="Fargate Task\n(Private Subnet B)" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fillColor=#F2F9F3;strokeColor=#6AA84F;fontSize=11" vertex="1" parent="ecs_group">
      <mxGeometry x="230" y="40" width="180" height="80" as="geometry"/>
    </mxCell>

    <mxCell id="fargate_task_3" value="Fargate Task\n(Private Subnet C)" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fillColor=#F2F9F3;strokeColor=#6AA84F;fontSize=11" vertex="1" parent="ecs_group">
      <mxGeometry x="420" y="40" width="180" height="80" as="geometry"/>
    </mxCell>

    <!-- Service Discovery (Cloud Map) -->
    <mxCell id="service_discovery" value="Service Discovery\n(AWS Cloud Map Private DNS Namespace)" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#0B5394;fontSize=11" vertex="1" parent="vpc_group">
      <mxGeometry x="520" y="570" width="300" height="80" as="geometry"/>
    </mxCell>

    <!-- Edge: Fargate tasks -> Service Discovery -->
    <mxCell id="edge_task1_sd" style="edgeStyle=elbowEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#444444;endArrow=block;endSize=8" edge="1" parent="ecs_group" source="fargate_task_1" target="service_discovery">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell id="edge_task2_sd" style="edgeStyle=elbowEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#444444;endArrow=block;endSize=8" edge="1" parent="ecs_group" source="fargate_task_2" target="service_discovery">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell id="edge_task3_sd" style="edgeStyle=elbowEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#444444;endArrow=block;endSize=8" edge="1" parent="ecs_group" source="fargate_task_3" target="service_discovery">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>

    <!-- NAT Gateway route edge: Private subnets -> NAT (via route) -->
    <mxCell id="edge_priv1_nat" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#999999;dashed=1;endArrow=block;endSize=8" edge="1" parent="vpc_group" source="priv_subnet_1" target="nat_gw">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell id="edge_priv2_nat" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#999999;dashed=1;endArrow=block;endSize=8" edge="1" parent="vpc_group" source="priv_subnet_2" target="nat_gw">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell id="edge_priv3_nat" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#999999;dashed=1;endArrow=block;endSize=8" edge="1" parent="vpc_group" source="priv_subnet_3" target="nat_gw">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>

    <!-- Edge: Public subnets -> Public Route Table -->
    <mxCell id="edge_pub1_rt" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#999999" edge="1" parent="vpc_group" source="pub_subnet_1" target="rt_public">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell id="edge_pub2_rt" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#999999" edge="1" parent="vpc_group" source="pub_subnet_2" target="rt_public">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell id="edge_pub3_rt" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#999999" edge="1" parent="vpc_group" source="pub_subnet_3" target="rt_public">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>

    <!-- Module: VPC outputs (visual only) -->
    <mxCell id="outputs_box" value="Outputs: vpc_id, public_subnets, private_subnets, cluster_arn" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#888888;fontSize=10" vertex="1" parent="vpc_group">
      <mxGeometry x="40" y="720" width="1160" height="60" as="geometry"/>
    </mxCell>

    <!-- Labels for modules: ECS Module -->
    <mxCell id="ecs_module_label" value="module.ecs_cluster (terraform-aws-modules/ecs/aws)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=none;strokeColor=none;fontSize=10;fontColor=#555555" vertex="1" parent="ecs_group">
      <mxGeometry x="10" y="10" width="200" height="18" as="geometry"/>
    </mxCell>

    <!-- Labels for VPC module -->
    <mxCell id="vpc_module_label" value="module.vpc (terraform-aws-modules/vpc/aws)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=none;strokeColor=none;fontSize=10;fontColor=#555555" vertex="1" parent="vpc_group">
      <mxGeometry x="20" y="14" width="260" height="18" as="geometry"/>
    </mxCell>

  </root>
</mxGraphModel>
</diagram>
</mxfile>
<mxfile host="app.diagrams.net" modified="2025-12-03T00:00:00Z" agent="5.0 (Windows)" version="24.7.8" editor="diagrams.net">
  <diagram id="ecs-vpc-diagram" name="AWS ECS Blueprint">
    <mxGraphModel dx="1362" dy="731" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1920" pageHeight="1080" math="1" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- AWS Cloud -->
        <mxCell id="awsCloud" value="AWS Cloud (us-west-2)" style="shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_aws_cloud_alt;labelPosition=center;verticalAlign=top;align=center;spacingTop=10;fillColor=none;strokeColor=#232F3E;fontColor=#232F3E;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="120" y="40" width="980" height="640" as="geometry"/>
        </mxCell>

        <!-- VPC -->
        <mxCell id="vpc" value="VPC&#xa;10.0.0.0/16" style="shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_vpc;dashed=1;strokeColor=#147EBA;fillColor=none;rounded=0;labelPosition=left;verticalAlign=top;align=left;spacingLeft=10;spacingTop=10;fontStyle=1;fontColor=#232F3E;" vertex="1" parent="awsCloud">
          <mxGeometry x="40" y="40" width="900" height="560" as="geometry"/>
        </mxCell>

        <!-- Public Subnets Group -->
        <mxCell id="publicSubnets" value="Public Subnets" style="swimlane;horizontal=0;rounded=0;dashed=1;strokeColor=#AAB7B8;fillColor=none;fontStyle=1;labelPosition=top;verticalAlign=top;align=left;spacingTop=4;spacingLeft=4;" vertex="1" parent="vpc">
          <mxGeometry x="40" y="60" width="820" height="190" as="geometry"/>
        </mxCell>

        <!-- Private Subnets Group -->
        <mxCell id="privateSubnets" value="Private Subnets" style="swimlane;horizontal=0;rounded=0;dashed=1;strokeColor=#AAB7B8;fillColor=none;fontStyle=1;labelPosition=top;verticalAlign=top;align=left;spacingTop=4;spacingLeft=4;" vertex="1" parent="vpc">
          <mxGeometry x="40" y="290" width="820" height="260" as="geometry"/>
        </mxCell>

        <!-- AZ labels -->
        <mxCell id="azLabel" value="AZs: us-west-2a, us-west-2b, us-west-2c" style="text;align=left;verticalAlign=top;fontSize=11;fontColor=#4D4D4D;" vertex="1" parent="vpc">
          <mxGeometry x="50" y="40" width="300" height="20" as="geometry"/>
        </mxCell>

        <!-- Public Subnet AZ1 -->
        <mxCell id="publicSubnet1" value="Public Subnet A" style="swimlane;horizontal=1;rounded=0;strokeColor=#AAB7B8;fillColor=none;fontSize=11;labelPosition=top;verticalAlign=top;align=center;spacingTop=4;" vertex="1" parent="publicSubnets">
          <mxGeometry x="10" y="30" width="260" height="150" as="geometry"/>
        </mxCell>

        <!-- Public Subnet AZ2 -->
        <mxCell id="publicSubnet2" value="Public Subnet B" style="swimlane;horizontal=1;rounded=0;strokeColor=#AAB7B8;fillColor=none;fontSize=11;labelPosition=top;verticalAlign=top;align=center;spacingTop=4;" vertex="1" parent="publicSubnets">
          <mxGeometry x="280" y="30" width="260" height="150" as="geometry"/>
        </mxCell>

        <!-- Public Subnet AZ3 -->
        <mxCell id="publicSubnet3" value="Public Subnet C" style="swimlane;horizontal=1;rounded=0;strokeColor=#AAB7B8;fillColor=none;fontSize=11;labelPosition=top;verticalAlign=top;align=center;spacingTop=4;" vertex="1" parent="publicSubnets">
          <mxGeometry x="550" y="30" width="260" height="150" as="geometry"/>
        </mxCell>

        <!-- Private Subnet AZ1 -->
        <mxCell id="privateSubnet1" value="Private Subnet A" style="swimlane;horizontal=1;rounded=0;strokeColor=#AAB7B8;fillColor=none;fontSize=11;labelPosition=top;verticalAlign=top;align=center;spacingTop=4;" vertex="1" parent="privateSubnets">
          <mxGeometry x="10" y="30" width="260" height="210" as="geometry"/>
        </mxCell>

        <!-- Private Subnet AZ2 -->
        <mxCell id="privateSubnet2" value="Private Subnet B" style="swimlane;horizontal=1;rounded=0;strokeColor=#AAB7B8;fillColor=none;fontSize=11;labelPosition=top;verticalAlign=top;align=center;spacingTop=4;" vertex="1" parent="privateSubnets">
          <mxGeometry x="280" y="30" width="260" height="210" as="geometry"/>
        </mxCell>

        <!-- Private Subnet AZ3 -->
        <mxCell id="privateSubnet3" value="Private Subnet C" style="swimlane;horizontal=1;rounded=0;strokeColor=#AAB7B8;fillColor=none;fontSize=11;labelPosition=top;verticalAlign=top;align=center;spacingTop=4;" vertex="1" parent="privateSubnets">
          <mxGeometry x="550" y="30" width="260" height="210" as="geometry"/>
        </mxCell>

        <!-- Internet Gateway -->
        <mxCell id="igw" value="Internet Gateway" style="shape=mxgraph.aws4.internet_gateway;verticalLabelPosition=bottom;verticalAlign=top;align=center;imageAlign=center;labelBackgroundColor=none;fontColor=#232F3E;" vertex="1" parent="vpc">
          <mxGeometry x="780" y="80" width="50" height="50" as="geometry"/>
        </mxCell>

        <!-- NAT Gateway (single_nat_gateway = true) -->
        <mxCell id="natGw" value="NAT Gateway" style="shape=mxgraph.aws4.nat_gateway;verticalLabelPosition=bottom;verticalAlign=top;align=center;imageAlign=center;labelBackgroundColor=none;fontColor=#232F3E;" vertex="1" parent="publicSubnet1">
          <mxGeometry x="95" y="70" width="50" height="50" as="geometry"/>
        </mxCell>

        <!-- Routes: Private Subnets -> NAT Gateway -->
        <mxCell id="edgePrivate1ToNat" edge="1" parent="vpc" source="privateSubnet1" target="natGw" style="endArrow=block;endFill=1;strokeColor=#7F8C8D;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="edgePrivate2ToNat" edge="1" parent="vpc" source="privateSubnet2" target="natGw" style="endArrow=block;endFill=1;strokeColor=#7F8C8D;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="edgePrivate3ToNat" edge="1" parent="vpc" source="privateSubnet3" target="natGw" style="endArrow=block;endFill=1;strokeColor=#7F8C8D;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Route: NAT Gateway -> Internet Gateway -->
        <mxCell id="edgeNatToIgw" edge="1" parent="vpc" source="natGw" target="igw" style="endArrow=block;endFill=1;strokeColor=#7F8C8D;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- ECS Cluster Group -->
        <mxCell id="ecsClusterGroup" value="ECS Cluster" style="shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_aws;dashed=0;rounded=0;strokeColor=#FF9900;fillColor=none;labelPosition=top;verticalAlign=top;align=left;spacingTop=8;spacingLeft=8;fontStyle=1;fontColor=#232F3E;" vertex="1" parent="vpc">
          <mxGeometry x="160" y="320" width="650" height="210" as="geometry"/>
        </mxCell>

        <!-- ECS Cluster Icon -->
        <mxCell id="ecsCluster" value="ECS Cluster&#xa;FARGATE / FARGATE_SPOT" style="shape=mxgraph.aws4.ecs;verticalLabelPosition=bottom;verticalAlign=top;align=center;imageAlign=center;labelBackgroundColor=none;fontColor=#232F3E;" vertex="1" parent="ecsClusterGroup">
          <mxGeometry x="280" y="40" width="60" height="60" as="geometry"/>
        </mxCell>

        <!-- Fargate Tasks in Private Subnets -->
        <mxCell id="taskA" value="Fargate Tasks" style="shape=mxgraph.aws4.container;verticalLabelPosition=bottom;verticalAlign=top;align=center;imageAlign=center;labelBackgroundColor=none;fontColor=#232F3E;" vertex="1" parent="privateSubnet1">
          <mxGeometry x="100" y="90" width="50" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="taskB" value="Fargate Tasks" style="shape=mxgraph.aws4.container;verticalLabelPosition=bottom;verticalAlign=top;align=center;imageAlign=center;labelBackgroundColor=none;fontColor=#232F3E;" vertex="1" parent="privateSubnet2">
          <mxGeometry x="100" y="90" width="50" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="taskC" value="Fargate Tasks" style="shape=mxgraph.aws4.container;verticalLabelPosition=bottom;verticalAlign=top;align=center;imageAlign=center;labelBackgroundColor=none;fontColor=#232F3E;" vertex="1" parent="privateSubnet3">
          <mxGeometry x="100" y="90" width="50" height="50" as="geometry"/>
        </mxCell>

        <!-- Lines from ECS Cluster to Fargate Tasks -->
        <mxCell id="edgeClusterToTaskA" edge="1" parent="ecsClusterGroup" source="ecsCluster" target="taskA" style="endArrow=block;endFill=1;strokeColor=#7F8C8D;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="edgeClusterToTaskB" edge="1" parent="ecsClusterGroup" source="ecsCluster" target="taskB" style="endArrow=block;endFill=1;strokeColor=#7F8C8D;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="edgeClusterToTaskC" edge="1" parent="ecsClusterGroup" source="ecsCluster" target="taskC" style="endArrow=block;endFill=1;strokeColor=#7F8C8D;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Service Discovery Namespace (Cloud Map Private DNS Namespace) -->
        <mxCell id="sdNamespace" value="Cloud Map&#xa;Private DNS Namespace&#xa;default.&lt;cluster-name&gt;.local" style="shape=mxgraph.aws4.cloud_map;verticalLabelPosition=bottom;verticalAlign=top;align=center;imageAlign=center;labelBackgroundColor=none;fontColor=#232F3E;" vertex="1" parent="vpc">
          <mxGeometry x="680" y="340" width="60" height="60" as="geometry"/>
        </mxCell>

        <!-- Connection: ECS Cluster -> Service Discovery -->
        <mxCell id="edgeClusterToSD" edge="1" parent="vpc" source="ecsCluster" target="sdNamespace" style="endArrow=block;endFill=1;strokeColor=#7F8C8D;labelBackgroundColor=none;fontSize=11;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Label for Service Connect Defaults -->
        <mxCell id="edgeLabelSC" value="Service Connect&#xa;namespace ARN" style="text;align=center;verticalAlign=middle;fontSize=10;fontColor=#4D4D4D;" vertex="1" parent="vpc">
          <mxGeometry x="610" y="365" width="70" height="40" as="geometry"/>
        </mxCell>

        <!-- AWS Account / Provider Note -->
        <mxCell id="providerNote" value="Terraform AWS Provider&#xa;Region: us-west-2&#xa;Resources: VPC, Subnets, NAT GW, ECS Cluster, Cloud Map" style="shape=note;whiteSpace=wrap;html=1;rounded=1;strokeColor=#BDC3C7;fillColor=#FBFCFC;fontSize=10;fontColor=#4D4D4D;" vertex="1" parent="awsCloud">
          <mxGeometry x="770" y="520" width="230" height="90" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
