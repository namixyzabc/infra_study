

### 1. リポジトリの追加と確認
まず、OS（AlmaLinuxなど）のデフォルトのリポジトリにはMySQLが含まれていないため、**MySQL公式サイトが提供するリポジトリ**を導入します。
*   **リポジトリのインストール**: `dnf install` コマンドに続けて、MySQL 8.0系の公式リポジトリURLを指定して実行します。
*   **有効化の確認**: `dnf repolist all | grep mysql` を実行し、MySQL 8.0のコミュニティリポジトリが「enabled（有効）」になっているか確認します。

### 2. MySQL本体のインストール
リポジトリが準備できたら、サーバー本体をインストールします。
*   **インストール実行**: **`dnf install mysql-community-server`** コマンドを使用します。
*   依存関係のあるパッケージも同時にインストールされるため、確認画面で「y（Yes）」を入力して進めます。

### 3. サービスの起動と自動起動設定
インストール完了後、データベースを起動し、サーバー再起動時にも自動で立ち上がるように設定します。
*   **起動**: `systemctl start mysqld` を実行します（データベースは重いため、起動に少し時間がかかる場合があります）。
*   **状態確認**: `systemctl status mysqld` で「active (running)」と表示されるか確認します。
*   **自動起動の有効化**: `systemctl enable mysqld` を実行します。

### 4. 初期パスワードの確認とセキュリティ設定
MySQLはインストール直後、一時的なパスワードがログファイルに生成されます。
*   **一時パスワードの取得**: `/var/log/mysqld.log` ファイルを `grep` コマンドで検索し、「temporary password」を確認します。
*   **初期設定（セキュリティ向上）**: **`mysql_secure_installation`** コマンドを実行します。この対話形式のツールにより、以下の設定をまとめて行えます,:
    *   ルートユーザーのパスワード変更
    *   匿名ユーザー（Anonymous User）の削除
    *   リモートからのルートログインの禁止
    *   テスト用データベースの削除

### 5. スロークエリログの設定（推奨設定）
実行に時間がかかり負荷の原因となるSQLを特定するため、**スロークエリログ**の出力設定を行うことが推奨されています。
*   **設定ファイルの編集**: `/etc/my.cnf` を開き、以下の内容を追記します:
    *   `slow_query_log = 1`（有効化）
    *   `long_query_time = 1`（1秒以上かかるクエリを記録）
    *   `slow_query_log_file = /var/log/mysql/slow-query.log`（出力先）
*   **ディレクトリの作成と権限変更**: ログ出力先となる `/var/log/mysql` ディレクトリを作成し、MySQLが書き込めるよう所有者を `chown` コマンドで **`mysql` ユーザー**に変更します。
*   **設定の反映**: `systemctl restart mysqld` でサービスを再起動します。

---
