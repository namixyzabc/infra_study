# GitHubでコンフリクトが発生した場合の解消方法（VSCode版）

## コンフリクトとは

**コンフリクト（競合）**とは、同じファイルの同じ箇所を複数の人が異なる内容で変更した際に発生する問題です。Gitが自動的にマージできない状態を指します。

## コンフリクトが発生するタイミング

- `git pull`実行時
- `git merge`実行時
- `git rebase`実行時
- プルリクエストのマージ時

## VSCodeでのコンフリクト解消手順

### 1. コンフリクトの発生確認

コンフリクトが発生すると、VSCodeで以下の表示が現れます：

- **ソース管理パネル**に「!」マークの付いたファイル
- ファイル名の横に「C」（Conflict）の表示
- エディタ上でコンフリクト箇所がハイライト表示

### 2. コンフリクトファイルの内容確認

コンフリクトが発生したファイルを開くと、以下のような表示になります：

```
<<<<<<< HEAD
あなたの変更内容
=======
他の人の変更内容
>>>>>>> branch-name
```

**マーカーの意味：**
- `<<<<<<< HEAD`：現在のブランチの内容開始
- `=======`：変更内容の境界線
- `>>>>>>> branch-name`：マージしようとしているブランチの内容終了

### 3. VSCodeの統合機能を使った解消

VSCodeでは、コンフリクト箇所の上部に以下のボタンが表示されます：

- **「Accept Current Change」**：現在の変更を採用
- **「Accept Incoming Change」**：相手の変更を採用
- **「Accept Both Changes」**：両方の変更を採用
- **「Compare Changes」**：変更内容を比較表示

### 4. 手動でのコンフリクト解消

#### 手順：
1. コンフリクトマーカー（`<<<<<<<`, `=======`, `>>>>>>>`）を削除
2. 必要な内容を残して不要な部分を削除
3. 最終的なコードが正しく動作するよう調整

#### 例：
```javascript
// コンフリクト発生時
<<<<<<< HEAD
function greet(name) {
    return "Hello, " + name + "!";
}
=======
function greet(name) {
    return `Hi, ${name}!`;
}
>>>>>>> feature-branch

// 解消後
function greet(name) {
    return `Hello, ${name}!`;
}
```

### 5. VSCodeの3-way merge機能の活用

1. コンフリクトファイルを右クリック
2. **「Open in Merge Editor」**を選択
3. 3つのペインで変更内容を比較・編集：
   - **左ペイン**：現在のブランチ
   - **右ペイン**：マージ対象ブランチ
   - **下ペイン**：最終結果

### 6. コンフリクト解消の完了

#### ターミナルでの操作：
```bash
# 変更をステージング
git add .

# マージコミットを作成
git commit -m "Resolve merge conflict"

# リモートにプッシュ
git push origin main
```

#### VSCodeでの操作：
1. **ソース管理パネル**を開く
2. 変更されたファイルを**ステージング**（「+」ボタンクリック）
3. コミットメッセージを入力
4. **「コミット」**ボタンをクリック
5. **「プッシュ」**ボタンでリモートに反映

## コンフリクト解消のベストプラクティス

### 事前予防策
- **頻繁にpull**してローカルを最新に保つ
- **小さな単位**でコミットする
- **機能ごとにブランチ**を分ける
- **コードレビュー**を徹底する

### 解消時の注意点
- **動作確認**を必ず行う
- **テストの実行**を忘れない
- **関係者への確認**を取る
- **コミットメッセージ**を明確に記述

### チーム開発での配慮
- **コンフリクト解消の方針**を事前に決める
- **責任者を明確化**する
- **解消後の動作確認**を共有する

## トラブルシューティング

### よくある問題と対処法

**問題1：マーカーを削除し忘れた**
- 症状：コンパイルエラーや動作不良
- 対処：ファイル内で`<<<<<<<`を検索して削除

**問題2：意図しない内容が残った**
- 症状：期待した動作にならない
- 対処：`git log --oneline`で履歴確認後、必要に応じて修正コミット

**問題3：複数ファイルでコンフリクト**
- 症状：多数のファイルに「C」マーク
- 対処：ファイルごとに順次解消、最後に一括コミット

### 緊急時の回避方法

```bash
# マージを中止（コンフリクト解消前のみ）
git merge --abort

# 変更を一時退避
git stash

# 強制的に相手の変更を採用
git checkout --theirs ファイル名

# 強制的に自分の変更を採用
git checkout --ours ファイル名
```

**重要：**緊急回避は最終手段として使用し、必ずチームメンバーと相談してから実行してください。
