
---

## 目次

1.  [はじめに・環境準備](#1-はじめに環境準備)
2.  [初期設定と認証](#2-初期設定と認証)
3.  [基本操作とチャット](#3-基本操作とチャット)
4.  [ファイルとコンテキストの操作 (@コマンド)](#4-ファイルとコンテキストの操作-コマンド)
5.  [便利なコマンド一覧 (/コマンド)](#5-便利なコマンド一覧-コマンド)
6.  [プロジェクト固有の記憶 (GEMINI.md)](#6-プロジェクト固有の記憶-geminimd)
7.  [履歴の管理と復元](#7-履歴の管理と復元)
8.  [設定とカスタマイズ](#8-設定とカスタマイズ)
9.  [高度な機能 (自動化・サンドボックス)](#9-高度な機能-自動化サンドボックス)

---

## 1. はじめに・環境準備

Gemini CLIは、チャットだけでなく、ファイルの読み込み、コードの修正、システムコマンドの実行などが可能な強力なツールです。

### 起動方法
1.  **Visual Studio Code (VSC)** を開きます。
2.  上部メニューの **[ターミナル] > [新しいターミナル]** をクリックするか、ショートカットキー `` Ctrl + ` `` (バッククォート) を押してターミナルを開きます。

---

## 2. 初期設定と認証

Gemini CLIを利用するには、Googleアカウントでの認証が必要です。

### 認証の手順
推奨される方法は、普段お使いのGoogleアカウントでログインする方法です。

1.  ターミナルに以下のコマンドを入力してEnterキーを押します。
    ```powershell
    gemini
    ```
2.  初回起動時、認証方法の選択画面が表示されます。矢印キーで **[Login with Google]** を選択し、Enterを押します。
3.  ブラウザが立ち上がり、Googleのログイン画面が表示されます。画面の指示に従ってログインを完了してください。
4.  認証が完了すると、ターミナルに戻り、Gemini CLIが使用可能になります。

> **Point:** 基本的に無料のGoogleアカウントで利用可能です。Google Cloudのプロジェクト設定などは、企業アカウント等特殊な場合を除き不要です。

---

## 3. 基本操作とチャット

### チャットの開始
ターミナルにプロンプト（入力待機状態）が表示されたら、AIに話しかけるようにテキストを入力します。

*   **送信:** テキストを入力して `Enter` キー
*   **改行:** `Shift + Enter` または `Ctrl + Enter` (送信せずに改行)
*   **終了:** `/quit` または `/exit` と入力、もしくは `Ctrl + C`
*   **画面クリア:** `Ctrl + L` または `/clear`

### キーボードショートカット
VSCのターミナル内での主な操作です。

| 操作 | ショートカット |
| :--- | :--- |
| **送信** | `Enter` |
| **改行** | `Shift + Enter` |
| **履歴を戻る/進む** | `Ctrl + P` / `Ctrl + N` (または上下矢印) |
| **入力をキャンセル** | `Ctrl + C` |
| **入力履歴の検索** | `Ctrl + R` |
| **全消去** | `Ctrl + U` (カーソルより前), `Ctrl + K` (カーソルより後) |

---

## 4. ファイルとコンテキストの操作 (@コマンド)

Gemini CLIの最大の特徴は、ローカルのファイルをAIに読み込ませて質問できることです。`@` 記号を使います。

### ファイルを読み込ませる
*   **特定のファイル:** `@` の後にファイルパスを入力します。
    ```text
    @src/main.js このコードのバグを見つけてください
    ```
*   **フォルダごと:** フォルダを指定すると、その中のファイルを読み込みます（Git管理外のファイルは自動的に無視されます）。
    ```text
    @src/ リファクタリング案を提示して
    ```
*   **Gitの差分:** 現在の変更点を読み込ませることも可能です（カスタムコマンド等で活用）。

> **Tips:** VSCのターミナルでは、タブキーを押すとファイル名の補完が効くため、パスの入力が楽に行えます。

### ファイルの除外 (.geminiignore)
AIに読み込ませたくないファイル（APIキーや大きなバイナリファイルなど）がある場合、プロジェクトのルートに `.geminiignore` というファイルを作成し、ファイル名やフォルダ名を記述することで除外できます（`.gitignore`と同じ書き方です）。

---

## 5. 便利なコマンド一覧 (/コマンド)

スラッシュ `/` から始まるコマンドで、Gemini CLI自体の操作を行います。

| コマンド | 説明 |
| :--- | :--- |
| **/help** | ヘルプメニューを表示します。 |
| **/model** | 使用するGeminiモデル（Pro, Flashなど）を変更します。 |
| **/clear** | 画面の表示履歴を消去します（記憶は残ります）。 |
| **/chat** | チャット履歴の保存 (`/chat save <タグ名>`) や再開 (`/chat resume`) を行います。 |
| **/resume** | 自動保存された過去のセッション一覧を表示し、再開します。 |
| **/restore** | ファイル変更を実行する前の状態に戻します（チェックポイント機能）。 |
| **/settings** | 設定画面を開きます。 |
| **/theme** | ターミナルの配色テーマを変更します（Dark/Lightなど）。 |
| **/quit** | Gemini CLIを終了します。 |

---

## 6. プロジェクト固有の記憶 (GEMINI.md)

プロジェクトごとに「AIに覚えておいてほしいルール」がある場合、`GEMINI.md` というファイルを使います。

### 使い方
1.  プロジェクトのルートフォルダ（一番上の階層）に `GEMINI.md` というファイルを作成します。
2.  そのファイルに、ルールや前提条件を書きます。
    *   例：「TypeScriptを使用すること」「コメントは日本語で書くこと」「コーディング規約は〇〇に従うこと」
3.  Gemini CLIはこのファイルを自動的に読み込み、すべての回答に反映させます。

### メモリの管理コマンド
*   `/memory show`: 現在読み込まれている `GEMINI.md` の内容を確認します。
*   `/memory refresh`: `GEMINI.md` を編集した後、内容を再読み込みします。
*   `/init`: 現在のフォルダを分析し、`GEMINI.md` のひな形を自動作成します。

---

## 7. 履歴の管理と復元

### セッションの自動保存と再開
会話は自動的に保存されています。
*   `/resume` コマンドを入力すると、過去の会話リストが表示され、選択して続きから再開できます。

### チェックポイントと復元 (Checkpointing)
AIがコードを修正したりファイルを書き換えたりする際、**変更前の状態**を自動的に「チェックポイント」として保存する機能があります。AIの修正が失敗した場合などに役立ちます。

**有効化の手順:**
1.  `/settings` コマンドで設定を開くか、設定ファイル (`.gemini/settings.json`) を直接編集します。
2.  以下の設定を追加・有効化します。
    ```json
    "checkpointing": {
      "enabled": true
    }
    ```

**復元の実行:**
*   `/restore` と入力すると、直前のファイル変更を取り消して元の状態に戻せます。

---

## 8. 設定とカスタマイズ

Gemini CLIの挙動は細かくカスタマイズ可能です。

### 設定の変更方法
*   **対話形式:** `/settings` コマンドを入力すると、メニュー形式で設定を変更できます。
*   **ファイル編集:** ユーザーディレクトリ (`~/.gemini/settings.json`) またはプロジェクトフォルダ (`.gemini/settings.json`) を直接編集します。

### 主な設定項目
*   **Theme (テーマ):** `/theme` で見た目を変更可能（GitHub Dark, Draculaなど）。
*   **Editor:** `/editor` で使用するエディタを選択（VSCなら `code`）。
*   **Vim Mode:** Vimのキー操作に慣れている場合は有効化できます。

---

## 9. 高度な機能 (自動化・サンドボックス)

### シェルコマンドの実行 (!)
チャット欄で `!` を先頭につけると、通常のシェルコマンド（Powershellコマンド）を実行できます。
*   例: `!dir` (ファイル一覧を表示), `!git status`

### ヘッドレスモード (自動化)
対話モードではなく、コマンド一発で回答を得たい場合に使用します。
*   `gemini -p "Reactとは何ですか？"`
*   ファイルの内容をパイプで渡す: `type README.md | gemini -p "要約して"`

### サンドボックス (Sandbox)
AIが実行するコマンドやファイル操作を安全に行うため、Dockerコンテナ内で実行させる機能です。
*   起動時に `gemini --sandbox` (または `-s`) オプションを付けます。
*   これにより、誤って重要なファイルを削除するなどの事故を防げます（Dockerのインストールが必要です）。

---

## トラブルシューティング Q&A

**Q. 認証エラーが出る、またはAPIキーを求められる**
A. Google Cloudの設定が必要なアカウント（企業用など）の可能性があります。個人のGoogleアカウント（Gmail）でのログインを試してください。APIキーを使用する場合は、Google AI Studioでキーを取得し、環境変数 `GEMINI_API_KEY` に設定してください。

**Q. ファイルを読み込んでくれない**
A. `.gitignore` や `.geminiignore` に記載されているファイルは無視されます。設定を確認してください。

**Q. 動作が重い**
A. `/stats` コマンドでトークン使用量を確認してください。会話が長すぎると遅くなることがあります。`/clear` で画面を消すか、`/chat save` して新しいセッションを始めてください。

---

