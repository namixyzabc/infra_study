
## 目次

1.  [はじめに](#1-はじめに)
2.  [事前準備](#2-事前準備)
3.  [インストール](#3-インストール)
4.  [認証設定（重要）](#4-認証設定重要)
5.  [基本的な使い方](#5-基本的な使い方)
6.  [コマンド操作ガイド](#6-コマンド操作ガイド)
    *   [スラッシュコマンド (/)](#スラッシュコマンド-)
    *   [アットマークコマンド (@)](#アットマークコマンド-)
    *   [シェルコマンド (!)](#シェルコマンド-)
7.  [便利なショートカットキー](#7-便利なショートカットキー)
8.  [設定とカスタマイズ](#8-設定とカスタマイズ)
9.  [高度な機能（開発効率化）](#9-高度な機能開発効率化)
    *   [チェックポイント機能 (Undo/Restore)](#チェックポイント機能-undorestore)
    *   [GEMINI.md (AIへの指示書)](#geminimd-aiへの指示書)
    *   [ヘッドレスモード (自動化)](#ヘッドレスモード-自動化)
10. [トラブルシューティング](#10-トラブルシューティング)

---

## 1. はじめに

Gemini CLI は、ターミナル（コマンドライン）からGoogleの生成AI「Gemini」と対話できるツールです。特に開発者向けに設計されており、以下の特徴があります。

*   **VSCとの親和性:** ターミナルでコードについて直接質問したり、修正案を出させたりできます。
*   **ファイル読み込み:** プロジェクト内のファイルをAIに読み込ませて質問できます。
*   **セキュリティ:** エンタープライズレベルのセキュリティ設定が可能です。

---

## 2. 事前準備

Gemini CLIを使用するには、PCに「Node.js」がインストールされている必要があります。

1.  **Node.jsの確認:**
    VSCのターミナルを開き（`Ctrl` + `Shift` + ` ` `）、以下を入力します。
    ```bash
    node -v
    ```
    バージョン番号（例: `v20.x.x`）が表示されればOKです。エラーが出る場合は、[Node.js公式サイト](https://nodejs.org/)からインストールしてください。

2.  **VSCの準備:**
    Visual Studio Codeを開き、作業したいプロジェクトフォルダを開いておきます。

---

## 3. インストール

Gemini CLIをインストールします。ここでは、常に呼び出せるようにグローバルインストールを行います。

VSCのターミナルで以下のコマンドを実行してください。

```bash
npm install -g @google/gemini-cli
```

インストールが完了したら、正しく入ったか確認します。

```bash
gemini --version
```

バージョン番号が表示されればインストール完了です。

---

## 4. 認証設定（重要）

Geminiを利用するにはGoogleアカウントでの認証が必要です。初心者の方には**Googleアカウントログイン**が最も推奨されます。

### 方法 A: Googleアカウントでログイン（推奨）

個人利用、またはGoogle Workspaceアカウント利用者はこの方法が一番簡単です。

1.  ターミナルで以下のコマンドを入力し、CLIを起動します。
    ```bash
    gemini
    ```
2.  矢印キーで **「Login with Google」** を選択し、`Enter` を押します。
3.  ブラウザが起動し、Googleのログイン画面が表示されます。
4.  使用するGoogleアカウントを選択し、アクセスを許可します。
5.  認証が完了すると、ターミナルに戻り、チャットが開始できる状態になります。

### 方法 B: APIキーを使用する

Google AI StudioのAPIキーを使用したい場合の手順です。

1.  [Google AI Studio](https://aistudio.google.com/app/apikey) でAPIキーを取得します。
2.  VSCで `.env` ファイル（または環境変数）を作成し、以下のように記述します。
    ```env
    GEMINI_API_KEY="あなたのAPIキー"
    ```
3.  これで `gemini` コマンドを実行すると、APIキーを使って認証されます。

---

## 5. 基本的な使い方

認証が終われば、すぐにAIと対話ができます。

### チャットの開始
ターミナルで `gemini` と入力するだけです。
```bash
gemini
```

### 対話の例
プロンプト（入力欄）が表示されたら、質問を入力して `Enter` を押します。

```text
> こんにちは、PythonでHello Worldを書く方法を教えて
```

### チャットの終了
以下のいずれかの操作で終了します。
*   コマンド: `/quit` または `/exit`
*   ショートカット: `Ctrl` + `C` （2回押すと強制終了）または `Ctrl` + `D`

---

## 6. コマンド操作ガイド

Gemini CLIには、チャット以外にも便利な特殊コマンドがあります。これらは大きく分けて3種類あります。

### 1. スラッシュコマンド (/)
CLI自体の設定や操作を行うコマンドです。

| コマンド | 説明 |
| :--- | :--- |
| `/help` | ヘルプメニューを表示します。 |
| `/clear` | 画面の履歴をクリアします（`Ctrl`+`L`でも可）。 |
| `/model` | 使用するAIモデル（Gemini Pro, Flashなど）を変更します。 |
| `/chat save <タグ名>` | 現在の会話を保存します。 |
| `/chat resume <タグ名>` | 保存した会話を再開します。 |
| `/settings` | 設定画面を開きます。設定ファイル（JSON）を安全に編集できます。 |
| `/theme` | 見た目のテーマ（配色）を変更します。 |
| `/stats` | トークン使用量やセッション時間などの統計を表示します。 |
| `/copy` | 直前のAIの回答をクリップボードにコピーします。 |

### 2. アットマークコマンド (@)
**開発において最も重要な機能です。** ファイルやフォルダの中身をAIに読み込ませることができます。

*   **単一ファイルの読み込み:**
    ```text
    > このコードのバグを見つけて @src/main.js
    ```
    `main.js`の内容がプロンプトに自動的に挿入され、AIがそれを踏まえて回答します。

*   **複数ファイルの読み込み:**
    ```text
    > これら2つのファイルの関係性は？ @header.h @source.c
    ```

*   **ディレクトリの読み込み（Git対応）:**
    ディレクトリを指定すると、その中のファイルを読み込みます（`.gitignore` で除外されているファイルは読み込まれません）。
    ```text
    > @src/utils/ フォルダ内のコードを要約して
    ```

*   **画像の読み込み:**
    画像ファイルのパスを指定すると、画像認識（マルチモーダル）機能を利用できます。
    ```text
    > @screenshot.png この画像のエラーメッセージは何と書いてある？
    ```

### 3. シェルコマンド (!)
Gemini CLIの中から、PCのターミナルコマンドを直接実行できます。

*   **コマンド実行:**
    ```text
    > !ls -la  (Windowsなら !dir)
    ```
*   **シェルモード切り替え:**
    `!` だけを入力して `Enter` を押すと、一時的に通常のシェルモードになります。再度 `exit` するとGeminiに戻ります。

---

## 7. 便利なショートカットキー

VSCでの作業効率を上げるための主要なショートカットです。

| 動作 | Windows / Linux | macOS |
| :--- | :--- | :--- |
| **送信** | `Enter` | `Enter` |
| **改行 (送信せずに入力)** | `Shift` + `Enter` | `Shift` + `Enter` |
| **画面クリア** | `Ctrl` + `L` | `Ctrl` + `L` |
| **履歴を戻る (↑)** | `Up Arrow` | `Up Arrow` |
| **履歴を進む (↓)** | `Down Arrow` | `Down Arrow` |
| **入力をクリア** | `Ctrl` + `C` | `Ctrl` + `C` |
| **入力内容をVSCエディタで開く** | `Ctrl` + `X` | `Ctrl` + `X` |
| **Undo (取り消し)** | `Ctrl` + `Z` | `Ctrl` + `Z` |

---

## 8. 設定とカスタマイズ

Gemini CLIの挙動は `/settings` コマンド、または設定ファイルで変更できます。

### 設定ファイルの場所
*   **ユーザー全体:** `~/.gemini/settings.json`
*   **プロジェクト専用:** プロジェクトルートの `.gemini/settings.json`

### おすすめの設定例
`/settings` コマンドを実行するとGUIライクな画面が開きますが、JSONを直接編集する場合は以下のような項目が便利です。

```json
{
  "ui": {
    "theme": "GitHub",         // テーマをGitHub風にする
    "showLineNumbers": true    // 回答のコードブロックに行番号を表示
  },
  "general": {
    "enablePromptCompletion": true // 入力補完を有効にする
  }
}
```

### 無視ファイルの設定 (.geminiignore)
`.gitignore` と同様に、AIに読み込ませたくないファイル（APIキーが含まれるファイルや巨大なログなど）を指定できます。
プロジェクトルートに `.geminiignore` ファイルを作成し、パスを記述します。

```text
# .geminiignore の例
secret_keys.txt
logs/
*.mp4
```

---

## 9. 高度な機能（開発効率化）

初心者から一歩進んだ、便利な機能を紹介します。

### チェックポイント機能 (Undo/Restore)
AIがファイルを書き換えたりする操作を行った際、その直前の状態を保存し、いつでも元に戻せる機能です。

**有効化:**
`settings.json` に以下を追加します。
```json
{
  "general": {
    "checkpointing": {
      "enabled": true
    }
  }
}
```

**使い方:**
もしAIによるファイル変更を取り消したい場合は、以下のコマンドを使います。
```text
> /restore
```

### GEMINI.md (AIへの指示書)
プロジェクトの「ルール」や「コンテキスト」をAIに覚え込ませる機能です。
プロジェクトのルートに `GEMINI.md` というファイルを作成し、そこに指示を書くと、全ての会話でその内容が前提知識として共有されます。

**GEMINI.md の例:**
```markdown
# プロジェクト: Todoアプリ

## コーディング規約
- 言語は TypeScript を使用してください。
- インデントはスペース2つです。
- 変数名はキャメルケースを使用してください。

## 役割
あなたはシニアエンジニアとして、堅牢なコードを提案してください。
```

これで、毎回「TypeScriptで書いて」と言わなくても、自動的にTypeScriptで回答してくれます。

### ヘッドレスモード (自動化)
対話モードに入らず、1回のコマンドで結果を得るモードです。パイプライン処理に便利です。

*   **基本的な使い方:**
    ```bash
    gemini -p "Reactとは何ですか？簡単に説明して"
    ```
*   **ファイルの中身をパイプで渡す:**
    ```bash
    cat README.md | gemini -p "このドキュメントを要約して"
    ```

---

## 10. トラブルシューティング

**Q: `API keys are not supported by this API` というエラーが出る**
A: 組織のアカウントで制限がかかっている可能性があります。`gcloud auth application-default login` を試すか、管理者に問い合わせてください。

**Q: ファイルを読み込もうとするとエラーになる**
A: パスが正しいか確認してください。また、バイナリファイル（画像やPDF以外）や巨大すぎるファイルは読み込めない場合があります。

**Q: アンインストールしたい**
A: 以下のコマンドを実行してください。
```bash
npm uninstall -g @google/gemini-cli
```

**Q: 会話履歴を完全に消したい**
A: `/chat delete <タグ>` を使うか、ホームディレクトリの `~/.gemini/tmp/` フォルダ内のデータを削除してください。
